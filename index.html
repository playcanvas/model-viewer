<!DOCTYPE html>
<html>
<head>
    <title>PlayCanvas Glb Viewer</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="icon" type="image/png" href="./playcanvas-logo.png" />
    <link rel="stylesheet" href="style.css">
    <script>
        // extract query params. taken from https://stackoverflow.com/a/21152762
        var urlParams = {};
        if (location.search) {
            location.search.substr(1).split("&").forEach(function (item) {
                var s = item.split("="),
                    k = s[0],
                    v = s[1] && decodeURIComponent(s[1]);
                (urlParams[k] = urlParams[k] || []).push(v);
            });
        }

        // load the engine with optional use_local_engine override
        var localEngineUrl = urlParams.hasOwnProperty('use_local_engine') ? urlParams.use_local_engine[0] : null;
        var engineScript = document.createElement('script');
        engineScript.setAttribute('src', localEngineUrl || "./playcanvas.js");
        engineScript.onload = function () {
            // load the asset manifest
            pc.http.get("asset_manifest.json", { cache: true, responseType: "text", retry: false }, handleAssetManifest);
        };
        document.head.appendChild(engineScript);
    </script>
    <script src="./playcanvas-extras.js"></script>
    <script src="./scripts/hdr-texture.js"></script>
    <script src="./scripts/download-texture.js"></script>
    <script src="./scripts/wasm-loader.js"></script>
</head>

<body onload="main()">
    <div id="flex-container">
        <div id="panel">
            <div class="header" href="#"><a href="#"><img src="playcanvas-logo.png"/><div><b>PLAY</b>CANVAS <span>viewer</span></div></a></div>
            <h3>SHOW</h3>
            <div class="controls">
                <div><label>Shiny Ball</label><input id="shiny" type="checkbox"></input></div>
                <div><label>Stats</label><input id="stats" type="checkbox"></input></div>
                <div><label>Wframe</label><input id="wireframe" type="checkbox"></input></div>
                <div><label>Bounds</label><input id="bounds" type="checkbox"></input></div>
                <div><label>Skeleton</label><input id="skeleton" type="checkbox"></input></div>
                <div><label>Normals</label><input id="normals" type="range" min="0" max="1" value="0" step="any"></input></div>
                <div><label>Fov</label><input id="fov" type="range" min="30" max="150" value="75" step="any"></input></div>
            </div>
            <h3>LIGHTING</h3>
            <div class="controls">
                <div><label>Skybox</label>
                    <select id="skybox">
                        <option value="">None</option>
                    </select>
                </div>
                <div><label>Direct</label><input id="directl" type="range" min="0" max="6" value="1" step="any"></input></div>
                <div><label>Env</label><input id="envl" type="range" min="0" max="6" value="1" step="any"></input></div>
            </div>
            <h3>ANIMATION</h3>
            <div class="controls">
                <div id="scrub-container">
                    <input id="play" type='button' value="&#x25b6;" />
                    <input id="stop" type='button' value="&#x25fc;" />
                </div>
                <div><label>Speed</label><input id="speed" type="range" min="0" max="2" value="1" step="any"></input></div>
                <div><label>Graphs</label><input id="graphs" type="checkbox"></input></div>
                <ul id="anim-list"></ul>
            </div>
            <h3>MORPH TARGETS</h3>
            <div class="controls">
                <ul id="morph-targets"></ul>
            </div>
        </div>
        <!-- The canvas element -->
        <canvas id="application-canvas"></canvas>
    </div>
    <script src="./src/viewer.js"></script>
    <script src="./src/controls.js"></script>
    <script src="./src/graph.js"></script>
    <script src="./src/debug.js"></script>
</body>
</html>
